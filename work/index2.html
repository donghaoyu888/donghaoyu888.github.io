<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <title>页面懒加载</title>
        <style>
            img {
                display: block;
                margin: 0 auto 50px;
                width: 960px;
                height: 540px;
            }
        </style>
    </head>
    <body>
        <div id="box" v-lee>
            <img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/01.jpg" alt="">
            <img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/02.jpg" alt="">
            <img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/03.jpg" alt="">
            <img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/04.jpg" alt="">
            <img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/05.jpg" alt="">
            <img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/06.jpg" alt="">
            <img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/07.jpg" alt="">
            <img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/08.jpg" alt="">
			<img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/01.jpg" alt="">
			<img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/02.jpg" alt="">
			<img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/03.jpg" alt="">
			<img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/04.jpg" alt="">
			<img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/05.jpg" alt="">
			<img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/06.jpg" alt="">
			<img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/07.jpg" alt="">
			<img src="default.jpg" data-src="http://www.xiaoyuezhang.com/image/08.jpg" alt="">
        </div>
        
    </body>
    <script src="javascripts/vue.js"></script>
    <script>
        Vue.directive('lee',{
            inserted(dom){
                var num = dom.getElementsByTagName('img').length;
                var img = dom.getElementsByTagName("img");
                var n = 0;
                lazyload();                                
                window.onscroll = lazyload;
                function lazyload() {
                    var seeHeight = document.documentElement.clientHeight;
                    var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
                    for (var i = n; i < num; i++) {
                        if (img[i].offsetTop < seeHeight + scrollTop) {
                            if (img[i].getAttribute("src") == "default.jpg") {
                                img[i].src = img[i].getAttribute("data-src");
                            }
                            n = i + 1;
                        }
                    }
                }
            }
        })
        new Vue({
            el:'#box'
        })
    </script>
</html>